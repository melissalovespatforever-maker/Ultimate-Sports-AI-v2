<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sports Lounge | Ultimate Sports AI</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="sports-lounge-styles.css">
    <link rel="stylesheet" href="shop-styles.css">
    <link rel="stylesheet" href="daily-quest-styles.css">
    <link rel="stylesheet" href="trophy-notification.css">
</head>
<body>

    <!-- Sports Lounge Container -->
    <div class="sports-lounge-container">
        
        <!-- Mobile Sidebar Toggle -->
        <button id="mobile-sidebar-toggle" class="mobile-sidebar-toggle" title="Toggle Sidebar">
            <i class="fas fa-chart-bar"></i>
        </button>
        
        <!-- Hero Header -->
        <div class="lounge-hero">
            <div class="hero-content">
                <div class="hero-text">
                    <h1>
                        <i class="fas fa-gamepad"></i>
                        Sports Lounge
                    </h1>
                    <p>Compete, Chat, Win - Where Legends Are Made</p>
                </div>
                <div class="hero-stats">
                    <div class="stat-badge">
                        <i class="fas fa-users"></i>
                        <span id="online-count">1,247</span>
                        <small>Online</small>
                    </div>
                    <div class="stat-badge">
                        <i class="fas fa-trophy"></i>
                        <span id="active-battles">23</span>
                        <small>Live Battles</small>
                    </div>
                    <div class="stat-badge">
                        <i class="fas fa-fire"></i>
                        <span id="hot-streak">12</span>
                        <small>On Fire</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="lounge-tabs" id="lounge-tabs">
            <button class="lounge-tab active" data-tab="game-room">
                <i class="fas fa-gamepad"></i>
                <span>Game Room</span>
            </button>
            <button class="lounge-tab" data-tab="chat-room">
                <i class="fas fa-comments"></i>
                <span>Chat Room</span>
            </button>
            <button class="lounge-tab" data-tab="shop">
                <i class="fas fa-store"></i>
                <span>Shop</span>
            </button>
            <button class="lounge-tab" data-tab="inventory">
                <i class="fas fa-box-open"></i>
                <span>Inventory</span>
            </button>
            <button class="lounge-tab" data-tab="trophy-room">
                <i class="fas fa-trophy"></i>
                <span>Trophies</span>
            </button>
        </div>

        <!-- Tab Content Container -->
        <div class="tab-content-wrapper">

            <!-- ============================================
                 GAME ROOM TAB
                 ============================================ -->
            <div class="tab-content active" id="game-room">
                <div class="game-room-grid">
                    
                    <!-- Featured Game -->
                    <div class="lounge-card featured-game">
                        <div class="game-badge">üî• HOT</div>
                        <div class="game-content">
                            <h2>‚öîÔ∏è 1v1 Parlay Battle</h2>
                            <p>Challenge another player to head-to-head parlay duel</p>
                            <div class="game-stats">
                                <div class="stat"><i class="fas fa-users"></i> 45 Active Battles</div>
                                <div class="stat"><i class="fas fa-coins"></i> Win up to 1,000 coins</div>
                            </div>
                            <button class="btn-game-launch" data-game="minigame-parlay-battle.html">
                                <i class="fas fa-play"></i>
                                Start Battle
                            </button>
                        </div>
                    </div>

                    <!-- Game Cards Grid -->
                    <div class="games-grid">
                        
                        <!-- Sports Trivia -->
                        <div class="game-card">
                            <div class="game-icon-large">üß†</div>
                            <h3>Sports Trivia</h3>
                            <p>Test your sports knowledge across all leagues</p>
                            <div class="game-meta">
                                <span><i class="fas fa-clock"></i> 5 min</span>
                                <span><i class="fas fa-coins"></i> 50-500</span>
                            </div>
                            <button class="btn-game-play" data-game="minigame-trivia.html">Play Now</button>
                        </div>

                        <!-- Ultimate Football Sim -->
                        <div class="game-card">
                            <div class="game-icon-large">üèà</div>
                            <h3>Ultimate Football Sim</h3>
                            <p>Elite football simulation - manage teams & strategies</p>
                            <div class="game-meta">
                                <span><i class="fas fa-clock"></i> 10-15 min</span>
                                <span><i class="fas fa-coins"></i> 300-1,500</span>
                            </div>
                            <button class="btn-game-play" data-game="minigame-tecmo-sim.html">Play Now</button>
                        </div>

                        <!-- Slots Game -->
                        <div class="game-card">
                            <div class="game-icon-large">üé∞</div>
                            <h3>Lucky Slots</h3>
                            <p>Spin to win coins and prizes</p>
                            <div class="game-meta">
                                <span><i class="fas fa-clock"></i> 1 min</span>
                                <span><i class="fas fa-coins"></i> 10-1000</span>
                            </div>
                            <button class="btn-game-play" data-game="minigame-slots.html">Play Now</button>
                        </div>

                        <!-- Wheel of Fortune -->
                        <div class="game-card">
                            <div class="game-icon-large">üé°</div>
                            <h3>Prize Wheel</h3>
                            <p>Spin the wheel for instant rewards</p>
                            <div class="game-meta">
                                <span><i class="fas fa-clock"></i> 30 sec</span>
                                <span><i class="fas fa-coins"></i> 25-750</span>
                            </div>
                            <button class="btn-game-play" data-game="minigame-wheel.html">Play Now</button>
                        </div>

                        <!-- Coin Flip -->
                        <div class="game-card">
                            <div class="game-icon-large">ü™ô</div>
                            <h3>Coin Flip</h3>
                            <p>Double or nothing - test your luck!</p>
                            <div class="game-meta">
                                <span><i class="fas fa-clock"></i> 10 sec</span>
                                <span><i class="fas fa-coins"></i> 2x Bet</span>
                            </div>
                            <button class="btn-game-play" data-game="minigame-coinflip.html">Play Now</button>
                        </div>

                        <!-- Penalty Plinko -->
                        <div class="game-card">
                            <div class="game-icon-large">‚öΩ</div>
                            <h3>Penalty Plinko</h3>
                            <p>Drop the ball through defenders for big goals!</p>
                            <div class="game-meta">
                                <span><i class="fas fa-clock"></i> Instant</span>
                                <span><i class="fas fa-coins"></i> Up to 10x</span>
                            </div>
                            <button class="btn-game-play" data-game="minigame-plinko.html">Play Now</button>
                        </div>

                    </div>
                </div>
            </div>

            <!-- ============================================
                 CHAT ROOM TAB
                 ============================================ -->
            <div class="tab-content" id="chat-room">
                <div class="lounge-grid two-column">
                    
                    <!-- Main Chat -->
                    <div class="lounge-card chat-container-full">
                        <div class="card-header">
                            <h2><i class="fas fa-comments"></i> Lounge Chat</h2>
                            <div class="chat-actions">
                                <span class="chat-connection-status" id="chat-status">Connected</span>
                                <span class="online-users">
                                    <i class="fas fa-circle" style="color: #10b981; font-size: 8px;"></i> 
                                    <span id="chat-online-count">247</span> online
                                </span>
                                <div class="community-mood-gauge" id="mood-gauge" title="Community Sentiment (AI)">
                                    <span class="mood-icon">üòê</span>
                                    <span class="mood-text">NEUTRAL</span>
                                </div>
                                <div class="hype-meter-container" id="hype-meter" title="Lounge Hype Level">
                                    <div class="hype-label">HYPE</div>
                                    <div class="hype-bar">
                                        <div id="hype-fill" class="hype-fill" style="width: 0%"></div>
                                    </div>
                                    <div class="hype-percentage" id="hype-percent">0%</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Chat Categories -->
                        <div class="chat-categories">
                            <button class="chat-category-btn active" data-channel="general"># General</button>
                            <button class="chat-category-btn" data-channel="nfl"># NFL</button>
                            <button class="chat-category-btn" data-channel="nba"># NBA</button>
                            <button class="chat-category-btn" data-channel="live"># Live Games</button>
                            <button class="chat-category-btn" data-channel="strategy"># Strategy</button>
                        </div>

                        <div class="chat-messages" id="chat-messages"></div>
                        
                        <div class="chat-input-container">
                            <input 
                                type="text" 
                                id="chat-input" 
                                placeholder="Type a message... (Be respectful!)" 
                                maxlength="500"
                            />
                            <button class="btn-send" id="btn-send-chat">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Activity Sidebar -->
                    <div class="lounge-column">
                        <!-- Live ESPN Scores Widget -->
                        <div class="lounge-card live-scores-widget">
                            <div class="card-header">
                                <h2><i class="fas fa-basketball-ball"></i> Live Scores</h2>
                                <div class="score-leagues">
                                    <span class="active" data-league="NFL">NFL</span>
                                    <span data-league="NBA">NBA</span>
                                    <span data-league="MLB">MLB</span>
                                </div>
                            </div>
                            <div class="scores-list" id="live-scores-container">
                                <div class="score-loading">
                                    <i class="fas fa-spinner fa-spin"></i> Fetching ESPN data...
                                </div>
                            </div>
                        </div>

                        <!-- Live Activity Feed -->
                        <div class="lounge-card activity-feed">
                            <div class="card-header">
                                <h2><i class="fas fa-bolt"></i> Live Activity</h2>
                                <span class="pulse-indicator"></span>
                            </div>
                            <div class="activity-list" id="activity-feed"></div>
                        </div>

                        <!-- Trending Topics (Word Cloud) -->
                        <div class="lounge-card trending-topics-card">
                            <div class="card-header">
                                <h2><i class="fas fa-chart-line"></i> Trending Now</h2>
                            </div>
                            <div id="word-cloud-container" class="word-cloud-container">
                                <div class="cloud-empty">Waiting for trending topics...</div>
                            </div>
                        </div>

                        <!-- Live Betting Odds -->
                        <div class="lounge-card live-odds-card">
                            <div class="card-header">
                                <h2><i class="fas fa-chart-bar"></i> Live Odds</h2>
                                <button class="btn-icon" onclick="window.liveOddsSidebar.loadFeaturedOdds()" title="Refresh Odds">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                            <div id="live-odds-sidebar-container" class="live-odds-container">
                                <div class="odds-loading">
                                    <i class="fas fa-spinner fa-spin"></i> Loading odds...
                                </div>
                            </div>
                        </div>

                        <!-- User Profile Card -->
                        <div class="lounge-card user-profile-card">
                            <div class="profile-header">
                                <div class="profile-avatar" id="user-avatar">üéÆ</div>
                                <div class="profile-status online"></div>
                            </div>
                            <h3 class="profile-name" id="user-name">Loading...</h3>
                            <div class="profile-title">üî• Active Player</div>
                            <div class="profile-stats-grid">
                                <div class="profile-stat">
                                    <div class="stat-value" id="profile-wins">0</div>
                                    <div class="stat-label">Wins</div>
                                </div>
                                <div class="profile-stat">
                                    <div class="stat-value" id="profile-streak">0</div>
                                    <div class="stat-label">Streak</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ============================================
                 SHOP TAB
                 ============================================ -->
            <div class="tab-content" id="shop">
                <div class="shop-grid">
                    
                    <!-- Shop Header -->
                    <div class="shop-header">
                        <div>
                            <h1><i class="fas fa-store"></i> Ultimate Shop</h1>
                            <p>Level up your game with premium items & power-ups!</p>
                        </div>
                    </div>

                    <!-- Category Filters -->
                    <div class="shop-categories">
                        <button class="shop-cat-btn active" data-category="all">All</button>
                        <button class="shop-cat-btn" data-category="boosters">Boosters</button>
                        <button class="shop-cat-btn" data-category="avatars">Avatars</button>
                        <button class="shop-cat-btn" data-category="special">Special</button>
                    </div>

                    <!-- Boosters Section -->
                    <div class="shop-section" data-category="boosters">
                        <h2 class="section-title"><i class="fas fa-rocket"></i> Power-Up Boosters</h2>
                        <div class="shop-items-grid">
                            <!-- Coin Booster 2x -->
                            <div class="shop-item" data-item-id="coin-2x">
                                <div class="item-badge">POPULAR</div>
                                <div class="item-icon">üí∞</div>
                                <h3>2x Coin Booster</h3>
                                <p>Double all coin earnings for 1 hour</p>
                                <div class="item-price">
                                    <span class="price-amount">500</span>
                                    <span class="price-currency">ü™ô</span>
                                </div>
                                <button class="btn-buy" data-item="coin-2x" data-price="500">Buy Now</button>
                            </div>

                            <!-- 3x Coin Booster -->
                            <div class="shop-item">
                                <div class="item-badge gold">ELITE</div>
                                <div class="item-icon">ü§ë</div>
                                <h3>3x Coin Booster</h3>
                                <p>Triple all coin earnings for 1 hour</p>
                                <div class="item-price">
                                    <span class="price-amount">1,200</span>
                                    <span class="price-currency">ü™ô</span>
                                </div>
                                <button class="btn-buy" data-item="coin-3x" data-price="1200">Buy Now</button>
                            </div>

                            <!-- XP Booster -->
                            <div class="shop-item">
                                <div class="item-icon">üìà</div>
                                <h3>2x XP Booster</h3>
                                <p>Double experience gains for 2 hours</p>
                                <div class="item-price">
                                    <span class="price-amount">400</span>
                                    <span class="price-currency">ü™ô</span>
                                </div>
                                <button class="btn-buy" data-item="xp-2x" data-price="400">Buy Now</button>
                            </div>

                            <!-- Streak Shield -->
                            <div class="shop-item">
                                <div class="item-icon">üõ°Ô∏è</div>
                                <h3>Streak Shield</h3>
                                <p>Protect your win streak from one loss</p>
                                <div class="item-price">
                                    <span class="price-amount">600</span>
                                    <span class="price-currency">ü™ô</span>
                                </div>
                                <button class="btn-buy" data-item="streak-shield" data-price="600">Buy Now</button>
                            </div>
                        </div>
                    </div>

                    <!-- Avatars Section -->
                    <div class="shop-section" data-category="avatars">
                        <h2 class="section-title"><i class="fas fa-user-circle"></i> Exclusive Avatars</h2>
                        <div class="shop-items-grid">
                            <div class="shop-item">
                                <div class="item-icon">üëë</div>
                                <h3>King Chess Piece</h3>
                                <p>Show them who is the ruler of the lounge</p>
                                <div class="item-price">
                                    <span class="price-amount">2,500</span>
                                    <span class="price-currency">ü™ô</span>
                                </div>
                                <button class="btn-buy" data-item="king-chess" data-price="2500">Buy Now</button>
                            </div>
                            <div class="shop-item">
                                <div class="item-icon">üëü</div>
                                <h3>Jordan 1 Icon</h3>
                                <p>Classic kicks for the ultimate athlete</p>
                                <div class="item-price">
                                    <span class="price-amount">1,500</span>
                                    <span class="price-currency">ü™ô</span>
                                </div>
                                <button class="btn-buy" data-item="jordan-1" data-price="1500">Buy Now</button>
                            </div>
                            <div class="shop-item">
                                <div class="item-icon">üèÄ</div>
                                <h3>Gotrich Baller</h3>
                                <p>The ultimate flex for basketball fans</p>
                                <div class="item-price">
                                    <span class="price-amount">3,000</span>
                                    <span class="price-currency">ü™ô</span>
                                </div>
                                <button class="btn-buy" data-item="gotrich" data-price="3000">Buy Now</button>
                            </div>
                            <div class="shop-item">
                                <div class="item-icon">üé∞</div>
                                <h3>High Roller</h3>
                                <p>Animated slots avatar for lucky players</p>
                                <div class="item-price">
                                    <span class="price-amount">5,000</span>
                                    <span class="price-currency">ü™ô</span>
                                </div>
                                <button class="btn-buy" data-item="scrooge" data-price="5000">Buy Now</button>
                            </div>
                        </div>
                    </div>

                    <!-- Special Items Section -->
                    <div class="shop-section" data-category="special">
                        <h2 class="section-title"><i class="fas fa-gem"></i> Legendary Artifacts</h2>
                        <div class="shop-items-grid">
                            <div class="shop-item">
                                <div class="item-badge gold">LEGENDARY</div>
                                <div class="item-icon">üíç</div>
                                <h3>Blue Diamond Ring</h3>
                                <p>+3% Permanent XP Boost globally</p>
                                <div class="item-price">
                                    <span class="price-amount">25,000</span>
                                    <span class="price-currency">ü™ô</span>
                                </div>
                                <button class="btn-buy" data-item="blue-diamond-ring" data-price="25000">Buy Now</button>
                            </div>
                            <div class="shop-item">
                                <div class="item-badge gold">LEGENDARY</div>
                                <div class="item-icon">üí∞</div>
                                <h3>Golden Diamond Coin</h3>
                                <p>+5% Permanent Coin Bonus from wins</p>
                                <div class="item-price">
                                    <span class="price-amount">50,000</span>
                                    <span class="price-currency">ü™ô</span>
                                </div>
                                <button class="btn-buy" data-item="golden-coin" data-price="50000">Buy Now</button>
                            </div>
                            <div class="shop-item">
                                <div class="item-icon">üíº</div>
                                <h3>Guccii Duffel</h3>
                                <p>Exclusive cosmetic carry-all</p>
                                <div class="item-price">
                                    <span class="price-amount">10,000</span>
                                    <span class="price-currency">ü™ô</span>
                                </div>
                                <button class="btn-buy" data-item="guccii-duffel" data-price="10000">Buy Now</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- ============================================
                 INVENTORY TAB
                 ============================================ -->
            <div class="tab-content" id="inventory">
                <div class="lounge-card">
                    <div class="card-header">
                        <h2><i class="fas fa-box-open"></i> My Inventory</h2>
                        <p style="margin: 4px 0 0; color: var(--text-secondary); font-size: 13px;">Your collected items and boosters</p>
                    </div>
                    
                    <div id="inventory-content" style="padding: 24px;">
                        <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                            <i class="fas fa-box-open" style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;"></i>
                            <p>Your inventory is empty</p>
                            <p style="font-size: 14px;">Purchase items from the Shop to see them here!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ============================================
                 TROPHY ROOM TAB
                 ============================================ -->
            <div class="tab-content" id="trophy-room">
                <div class="trophy-case-container">
                    
                    <!-- Trophy Case Header -->
                    <div class="trophy-case-header">
                        <div class="header-content">
                            <h1><i class="fas fa-trophy"></i> Trophy Case</h1>
                            <p>Your championship achievements & tournament victories</p>
                        </div>
                        <div class="case-stats">
                            <div class="stat-item">
                                <span class="stat-number" id="trophy-count">5</span>
                                <span class="stat-label">Trophies</span>
                            </div>
                            <div class="stat-divider"></div>
                            <div class="stat-item">
                                <span class="stat-number" id="ring-count">2</span>
                                <span class="stat-label">Championship Rings</span>
                            </div>
                        </div>
                    </div>

                    <!-- Trophies Grid -->
                    <div class="lounge-card trophies-showcase">
                        <div class="card-header">
                            <h2><i class="fas fa-trophy"></i> Tournament Trophies</h2>
                        </div>
                        <div id="trophies-grid" class="trophies-grid">
                            <!-- Trophies will be loaded dynamically -->
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js" crossorigin="anonymous"></script>
    
    <!-- Core Systems -->
    <script src="config.js"></script>
    <script src="logger.js"></script>
    <script src="global-state-manager.js"></script>
    <script src="inventory-item-definitions.js"></script>
    <script src="inventory-system.js"></script>
    <script src="sports-data-service.js"></script>
    <script src="shop-system.js"></script>
    <script src="daily-quest-system.js"></script>
    
    <!-- Chat & AI Systems (ES Modules) -->
    <script type="module" src="sentiment-analyzer.js"></script>
    <script type="module" src="chat-summary-service.js"></script>
    <script type="module" src="sports-lounge-chat-client.js"></script>
    <script type="module" src="live-odds-sidebar.js"></script>
    
    <!-- Lounge Core -->
    <script src="sports-lounge-new.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Community Mood Listener
            window.addEventListener('communityMoodUpdated', (e) => {
                const gauge = document.getElementById('mood-gauge');
                if (gauge) {
                    const icon = gauge.querySelector('.mood-icon');
                    const text = gauge.querySelector('.mood-text');
                    
                    const moodParts = e.detail.mood.split(' ');
                    icon.textContent = moodParts[0];
                    text.textContent = moodParts.slice(1).join(' ');
                    
                    // Style based on sentiment
                    const score = e.detail.averageSentiment;
                    if (score > 0.1) gauge.style.color = '#4CAF50';
                    else if (score < -0.1) gauge.style.color = '#e74c3c';
                    else gauge.style.color = '#FFD700';
                }
            });
        });
    </script>
    
</body>
</html>
