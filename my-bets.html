<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Bets - Ultimate Sports AI</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="my-bets-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="my-bets-header">
            <button class="back-btn" onclick="window.location.href='index.html'">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h1><i class="fas fa-clipboard-list"></i> My Bets</h1>
            <div style="display: flex; gap: 10px;">
                <button class="export-btn" id="checkResultsBtn" title="Check bet results from ESPN">
                    <i class="fas fa-sync-alt"></i> Check Results
                </button>
                <button class="export-btn" id="exportBtn">
                    <i class="fas fa-download"></i> Export
                </button>
            </div>
        </header>

        <!-- Auto-Check Status -->
        <div style="background: rgba(99, 102, 241, 0.1); padding: 12px 20px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1);">
            <small style="color: rgba(255,255,255,0.7);">
                <i class="fas fa-robot"></i> Automatic result checking enabled
                <span id="lastCheckTime" style="margin-left: 10px;"></span>
            </small>
        </div>

        <!-- Stats Summary -->
        <div class="stats-summary">
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-list"></i></div>
                <div class="stat-info">
                    <div class="stat-value" id="totalBets">0</div>
                    <div class="stat-label">Total Bets</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon pending"><i class="fas fa-clock"></i></div>
                <div class="stat-info">
                    <div class="stat-value" id="pendingBets">0</div>
                    <div class="stat-label">Pending</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon won"><i class="fas fa-check-circle"></i></div>
                <div class="stat-info">
                    <div class="stat-value" id="wonBets">0</div>
                    <div class="stat-label">Won</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon lost"><i class="fas fa-times-circle"></i></div>
                <div class="stat-info">
                    <div class="stat-value" id="lostBets">0</div>
                    <div class="stat-label">Lost</div>
                </div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters-section">
            <button class="filter-btn active" data-filter="all">
                <i class="fas fa-globe"></i> All
            </button>
            <button class="filter-btn" data-filter="pending">
                <i class="fas fa-clock"></i> Pending
            </button>
            <button class="filter-btn" data-filter="won">
                <i class="fas fa-check-circle"></i> Won
            </button>
            <button class="filter-btn" data-filter="lost">
                <i class="fas fa-times-circle"></i> Lost
            </button>
            <button class="filter-btn" data-filter="today">
                <i class="fas fa-calendar-day"></i> Today
            </button>
        </div>

        <!-- Bets List -->
        <div class="bets-container" id="betsContainer">
            <!-- Sample bets will be injected here -->
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState" style="display: none;">
            <i class="fas fa-clipboard-list"></i>
            <h2>No Bets Yet</h2>
            <p>Start adding AI coach picks from the AI Coaches page!</p>
            <button class="btn-primary" onclick="window.location.href='ai-coaches-deluxe.js'">
                <i class="fas fa-robot"></i> View AI Coaches
            </button>
        </div>
    </div>

    <!-- Bet Detail Modal -->
    <div id="betDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Bet Details</h2>
                <button class="close-btn" onclick="closeBetModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Bet details will be injected here -->
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeBetModal()">Close</button>
                <button class="btn-danger" id="deleteBetBtn">
                    <i class="fas fa-trash"></i> Delete Bet
                </button>
                <button class="btn-primary" id="updateStatusBtn">
                    <i class="fas fa-edit"></i> Update Status
                </button>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Export Bets</h2>
                <button class="close-btn" onclick="closeExportModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>Choose how you'd like to export your bets:</p>
                <div class="export-options">
                    <button class="export-option" onclick="exportAsJSON()">
                        <i class="fas fa-code"></i>
                        <span>JSON File</span>
                        <small>For backup & data analysis</small>
                    </button>
                    <button class="export-option" onclick="exportAsCSV()">
                        <i class="fas fa-table"></i>
                        <span>CSV File</span>
                        <small>For Excel & spreadsheets</small>
                    </button>
                    <button class="export-option" onclick="exportAsText()">
                        <i class="fas fa-file-alt"></i>
                        <span>Text File</span>
                        <small>Simple readable format</small>
                    </button>
                    <button class="export-option" onclick="copyToClipboard()">
                        <i class="fas fa-copy"></i>
                        <span>Copy to Clipboard</span>
                        <small>Paste anywhere</small>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="bet-result-tracker.js"></script>
    <script src="my-bets.js"></script>
    <script>
        // Trigger check when page loads
        window.addEventListener('DOMContentLoaded', () => {
            // Dispatch event for bet tracker
            window.dispatchEvent(new Event('myBetsPageLoaded'));
        });
    </script>
</body>
</html>
