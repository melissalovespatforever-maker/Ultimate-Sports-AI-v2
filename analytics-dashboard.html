<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Dashboard - Ultimate Sports AI</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    
    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Analytics Tracker -->
    <script src="analytics-tracker.js"></script>
    
    <link rel="stylesheet" href="analytics-dashboard-styles.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <h1><i class="fas fa-chart-line"></i> Analytics Dashboard</h1>
                <p>Track tier restrictions, conversions, and user behavior</p>
            </div>
            <div class="header-actions">
                <button class="btn-secondary" onclick="dashboard.exportData()">
                    <i class="fas fa-download"></i> Export Data
                </button>
                <button class="btn-secondary" onclick="dashboard.refreshData()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="btn-danger" onclick="dashboard.clearData()">
                    <i class="fas fa-trash"></i> Clear Data
                </button>
            </div>
        </header>

        <!-- Summary Cards -->
        <section class="summary-cards">
            <div class="card">
                <div class="card-icon game-limit">
                    <i class="fas fa-gamepad"></i>
                </div>
                <div class="card-content">
                    <h3>Game Limit Hits</h3>
                    <p class="card-value" id="game-limit-hits">0</p>
                    <p class="card-label">Total restrictions hit</p>
                </div>
            </div>

            <div class="card">
                <div class="card-icon coach-lock">
                    <i class="fas fa-lock"></i>
                </div>
                <div class="card-content">
                    <h3>Coach Lock Clicks</h3>
                    <p class="card-value" id="coach-lock-clicks">0</p>
                    <p class="card-label">Locked coaches clicked</p>
                </div>
            </div>

            <div class="card">
                <div class="card-icon upgrade">
                    <i class="fas fa-arrow-up"></i>
                </div>
                <div class="card-content">
                    <h3>Upgrade Prompts</h3>
                    <p class="card-value" id="upgrade-prompts">0</p>
                    <p class="card-label">Shown / Clicked</p>
                </div>
            </div>

            <div class="card">
                <div class="card-icon conversion">
                    <i class="fas fa-crown"></i>
                </div>
                <div class="card-content">
                    <h3>Conversion Rate</h3>
                    <p class="card-value" id="conversion-rate">0%</p>
                    <p class="card-label">Prompt to subscription</p>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <div class="dashboard-content">
            <!-- Left Column -->
            <div class="dashboard-left">
                <!-- Upgrade Funnel -->
                <section class="panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-filter"></i> Upgrade Funnel</h2>
                    </div>
                    <div class="panel-content">
                        <div class="funnel-visualization" id="funnel-viz"></div>
                        
                        <div class="funnel-stats">
                            <div class="funnel-stat">
                                <span class="stat-label">Prompts Shown</span>
                                <span class="stat-value" id="funnel-prompts">0</span>
                            </div>
                            <div class="funnel-stat">
                                <span class="stat-label">Clicks</span>
                                <span class="stat-value" id="funnel-clicks">0</span>
                                <span class="stat-change" id="funnel-clicks-rate">0%</span>
                            </div>
                            <div class="funnel-stat">
                                <span class="stat-label">Subscription Visits</span>
                                <span class="stat-value" id="funnel-visits">0</span>
                                <span class="stat-change" id="funnel-visits-rate">0%</span>
                            </div>
                            <div class="funnel-stat">
                                <span class="stat-label">Conversions</span>
                                <span class="stat-value" id="funnel-conversions">0</span>
                                <span class="stat-change" id="funnel-conversion-rate">0%</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Game Limits -->
                <section class="panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-gamepad"></i> Game Limit Hits</h2>
                    </div>
                    <div class="panel-content">
                        <canvas id="game-limits-chart"></canvas>
                        
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">FREE Tier</span>
                                <span class="stat-value" id="game-limit-free">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">PRO Tier</span>
                                <span class="stat-value" id="game-limit-pro">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Top Game</span>
                                <span class="stat-value" id="game-limit-top">N/A</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Coach Locks -->
                <section class="panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-lock"></i> Coach Lock Clicks</h2>
                    </div>
                    <div class="panel-content">
                        <canvas id="coach-locks-chart"></canvas>
                        
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">FREE Tier</span>
                                <span class="stat-value" id="coach-lock-free">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">PRO Tier</span>
                                <span class="stat-value" id="coach-lock-pro">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Top Coach</span>
                                <span class="stat-value" id="coach-lock-top">N/A</span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Right Column -->
            <div class="dashboard-right">
                <!-- Source Breakdown -->
                <section class="panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-chart-pie"></i> Conversion Sources</h2>
                    </div>
                    <div class="panel-content">
                        <canvas id="sources-chart"></canvas>
                        
                        <div class="source-stats">
                            <div class="source-item">
                                <div class="source-header">
                                    <i class="fas fa-gamepad"></i>
                                    <span>Game Limits</span>
                                </div>
                                <div class="source-metrics">
                                    <span>Shown: <strong id="source-game-shown">0</strong></span>
                                    <span>Clicked: <strong id="source-game-clicked">0</strong></span>
                                    <span>Rate: <strong id="source-game-rate">0%</strong></span>
                                </div>
                            </div>
                            
                            <div class="source-item">
                                <div class="source-header">
                                    <i class="fas fa-lock"></i>
                                    <span>Coach Locks</span>
                                </div>
                                <div class="source-metrics">
                                    <span>Shown: <strong id="source-coach-shown">0</strong></span>
                                    <span>Clicked: <strong id="source-coach-clicked">0</strong></span>
                                    <span>Rate: <strong id="source-coach-rate">0%</strong></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- User Behavior -->
                <section class="panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-users"></i> User Behavior</h2>
                    </div>
                    <div class="panel-content">
                        <div class="behavior-stats">
                            <div class="behavior-item">
                                <span class="behavior-label">Games Played</span>
                                <span class="behavior-value" id="behavior-games">0</span>
                            </div>
                            <div class="behavior-item">
                                <span class="behavior-label">Coach Views</span>
                                <span class="behavior-value" id="behavior-coaches">0</span>
                            </div>
                            <div class="behavior-item">
                                <span class="behavior-label">Page Views</span>
                                <span class="behavior-value" id="behavior-pageviews">0</span>
                            </div>
                            <div class="behavior-item">
                                <span class="behavior-label">Sessions</span>
                                <span class="behavior-value" id="behavior-sessions">0</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Tier Distribution -->
                <section class="panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-layer-group"></i> Tier Distribution</h2>
                    </div>
                    <div class="panel-content">
                        <canvas id="tier-chart"></canvas>
                    </div>
                </section>

                <!-- Daily Trends -->
                <section class="panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-calendar"></i> 7-Day Trends</h2>
                    </div>
                    <div class="panel-content">
                        <canvas id="trends-chart"></canvas>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script src="analytics-dashboard.js"></script>
</body>
</html>
