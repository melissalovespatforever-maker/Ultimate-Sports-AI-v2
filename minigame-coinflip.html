<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Bot Racing Ultimate</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;
  background:#040812;
  overflow:hidden;
  font-family:system-ui,Arial;
}
canvas{display:block;}

#ui{
  position:absolute;
  bottom:14px;
  left:50%;
  transform:translateX(-50%);
  width:300px;
  background:rgba(10,20,45,.96);
  padding:14px;
  border-radius:16px;
  box-shadow:0 0 30px #00ffff55;
  color:#00ffff;
}
select,input,button{
  width:100%;
  margin-top:6px;
  padding:8px;
  border:none;
  border-radius:12px;
}
button{
  background:linear-gradient(135deg,#00ffff,#0066ff);
  font-weight:700;
}
#announcer{
  margin-top:8px;
  text-align:center;
  min-height:36px;
}
#finish{
  position:absolute;
  top:40%;
  left:50%;
  transform:translateX(-50%);
  font-size:52px;
  color:white;
  text-shadow:0 0 40px #00ffff;
  opacity:0;
}
</style>
</head>

<body>

<canvas id="c"></canvas>
<div id="finish"></div>

<div id="ui">
Balance: $<span id="bal">1000</span>

<select id="track">
  <option value="0">NEON CIRCUIT</option>
  <option value="1">LAVA RUN</option>
  <option value="2">VOID SPEEDWAY</option>
</select>

<select id="pick"></select>

<input id="bet" type="number" value="100">

<button id="start">START RACE</button>
<div id="announcer"></div>
</div>

<script>
/* ================= SETUP ================= */
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
addEventListener("resize",resize); resize();

/* ================= DATA ================= */
let balance = 1000;
let racing = false;
let cameraX = 0;
let betAmount = 0;
let pickedBot = null;

const tracks = [
  {name:"NEON CIRCUIT", length:1800, friction:0.99, color:"#00ffff"},
  {name:"LAVA RUN", length:2000, friction:0.985, color:"#ff5533"},
  {name:"VOID SPEEDWAY", length:2300, friction:0.975, color:"#bb66ff"}
];

const bots = [
  {name:"NEON-X", color:"#00ffff", base:2.4, skill:1.1},
  {name:"BLAZE-7", color:"#ff5533", base:2.5, skill:1.0},
  {name:"VORTEX", color:"#bb66ff", base:2.35, skill:1.2},
  {name:"ION-GHOST", color:"#66ff99", base:2.3, skill:1.3}
];

const announcerLines = [
  "ðŸš€ Engines online!",
  "âš¡ Acceleration surge!",
  "ðŸ”¥ This race is heating up!",
  "ðŸ’¥ A sudden speed burst!",
  "ðŸ‘€ Anyone can win this!"
];

let racers = [];
let activeTrack;

/* ================= UI ================= */
const balEl = document.getElementById("bal");
const ann = document.getElementById("announcer");
const finishEl = document.getElementById("finish");
const pickSel = document.getElementById("pick");

/* populate picks */
bots.forEach((b,i)=>{
  const o = document.createElement("option");
  o.value = i;
  o.textContent = b.name;
  pickSel.appendChild(o);
});

/* ================= START ================= */
document.getElementById("start").onclick = ()=>{
  if(racing) return;

  betAmount = +document.getElementById("bet").value;
  if(betAmount<=0 || betAmount>balance){
    ann.textContent = "âŒ Invalid bet";
    return;
  }

  balance -= betAmount;
  balEl.textContent = balance;

  pickedBot = +pickSel.value;
  activeTrack = tracks[+document.getElementById("track").value];

  racers = bots.map((b,i)=>({
    ...b,
    x:0,
    speed:b.base,
    y:canvas.height*0.4 + i*70,
    trail:[],
    finished:false
  }));

  racing = true;
  cameraX = 0;
  finishEl.style.opacity = 0;
  ann.textContent = "ðŸ Race started!";
};

/* ================= UPDATE ================= */
function update(){
  if(!racing) return;

  let leader = racers[0];

  racers.forEach((r,i)=>{
    if(r.finished) return;

    // AI behavior
    let chaos = Math.random()*0.4;
    let comeback = r.x < leader.x-120 ? 0.3 : 0;

    r.speed += (Math.random()-0.5)*0.08;
    r.speed = Math.max(1.6, Math.min(3.4, r.speed));

    r.x += (r.speed + chaos + comeback) * r.skill;
    r.x *= activeTrack.friction;

    r.trail.push({x:r.x,y:r.y});
    if(r.trail.length>14) r.trail.shift();

    if(r.x > leader.x) leader = r;

    if(r.x >= activeTrack.length){
      r.finished = true;
      racing = false;
      finishRace(i);
    }
  });

  cameraX += (leader.x - cameraX - 220)*0.08;

  if(Math.random()<0.01){
    ann.textContent = announcerLines[
      Math.floor(Math.random()*announcerLines.length)
    ];
  }
}

/* ================= FINISH ================= */
function finishRace(winner){
  finishEl.textContent = racers[winner].name + " WINS!";
  finishEl.style.opacity = 1;

  if(winner === pickedBot){
    let payout = betAmount * 2;
    balance += payout;
    ann.textContent = "ðŸ’° YOU WON $" + payout;
  }else{
    ann.textContent = "ðŸ˜¬ You lost the bet";
  }
  balEl.textContent = balance;
}

/* ================= DRAW ================= */
function draw(){
  ctx.fillStyle="#040812";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // lanes
  for(let i=0;i<4;i++){
    ctx.fillStyle = i%2?"#071025":"#0b1635";
    ctx.fillRect(0,canvas.height*0.37+i*70,canvas.width,70);
  }

  racers.forEach(r=>{
    let px = r.x-cameraX+220;

    // trail
    r.trail.forEach((t,i)=>{
      ctx.fillStyle = r.color+"55";
      ctx.beginPath();
      ctx.arc(t.x-cameraX+220,t.y,7-i*0.4,0,Math.PI*2);
      ctx.fill();
    });

    ctx.shadowBlur = 22;
    ctx.shadowColor = r.color;
    ctx.fillStyle = r.color;
    ctx.beginPath();
    ctx.arc(px,r.y,15,0,Math.PI*2);
    ctx.fill();
    ctx.shadowBlur = 0;
  });

  // finish line
  ctx.fillStyle = activeTrack.color;
  ctx.fillRect(activeTrack.length-cameraX+220,0,6,canvas.height);
}

/* ================= LOOP ================= */
(function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
})();
</script>

</body>
</html>
