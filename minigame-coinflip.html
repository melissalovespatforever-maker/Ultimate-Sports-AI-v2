<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Bot Racing</title>

<style>
html,body{
  margin:0;
  background:#000;
  overflow:hidden;
  font-family:Arial, sans-serif;
}

#ui{
  position:absolute;
  bottom:12px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(10,20,40,0.9);
  padding:12px;
  border-radius:14px;
  color:#00ffff;
  box-shadow:0 0 25px #00ffff88;
  min-width:240px;
  text-align:center;
}

button,input,select{
  width:100%;
  margin-top:6px;
  padding:8px;
  border-radius:8px;
  border:none;
}

button{
  background:linear-gradient(135deg,#00ffff,#0088ff);
  font-weight:bold;
}

#log{
  margin-top:6px;
  min-height:18px;
  font-size:14px;
}
</style>
</head>

<body>

<canvas id="canvas"></canvas>

<div id="ui">
Balance: $<span id="balance">1000</span><br>
<select id="pick"></select>
<input id="bet" type="number" value="100">
<button id="startBtn">START RACE</button>
<div id="log"></div>
</div>

<script>
/* =======================
   CANVAS SETUP
======================= */
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
window.addEventListener("resize", resize);
resize();

/* =======================
   UI ELEMENTS
======================= */
const balanceEl = document.getElementById("balance");
const logEl = document.getElementById("log");
const pickEl = document.getElementById("pick");
const betEl = document.getElementById("bet");
document.getElementById("startBtn").onclick = startRace;

/* =======================
   GAME CONSTANTS
======================= */
const FINISH_LINE = 6000;
const CAMERA_OFFSET = 300;

/* =======================
   GAME STATE
======================= */
let balance = 1000;
let racing = false;
let cameraX = 0;

/* =======================
   BOT DEFINITIONS
======================= */
const botTemplates = [
  { name:"NEON-X",   color:"#00ffff", overclock:0.6 },
  { name:"PHANTOM",  color:"#ff55ff", overclock:0.75 },
  { name:"GOLDCORE", color:"#ffd700", overclock:0.5 },
  { name:"REDSHIFT", color:"#ff3333", overclock:0.45 },
  { name:"OBSIDIAN", color:"#aaaaaa", overclock:0.35 }
];

const bots = botTemplates.map((b,i)=>({
  ...b,
  x:0,
  y:0,
  speed:2 + Math.random()*1.5,
  heat:120,
  frame:0,
  finished:false,
  particles:[]
}));

botTemplates.forEach((b,i)=>{
  pickEl.innerHTML += `<option value="${i}">${b.name}</option>`;
});

/* =======================
   HELPERS
======================= */
function announce(text){
  logEl.textContent = text;
}

function spawnParticle(bot){
  bot.particles.push({
    x:bot.x,
    y:bot.y,
    vx:-Math.random()*6-2,
    vy:(Math.random()-0.5)*3,
    life:30,
    size:4+Math.random()*4
  });
}

function updateParticles(bot){
  bot.particles.forEach(p=>{
    p.x += p.vx;
    p.y += p.vy;
    p.life--;
    p.size *= 0.95;
  });
  bot.particles = bot.particles.filter(p=>p.life>0);
}

/* =======================
   DRAWING
======================= */
function drawTrack(){
  ctx.fillStyle="#030914";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // grid
  ctx.strokeStyle="rgba(0,255,255,0.08)";
  for(let i=0;i<canvas.width;i+=60){
    ctx.beginPath();
    ctx.moveTo(i-(cameraX%60),0);
    ctx.lineTo(i-(cameraX%60),canvas.height);
    ctx.stroke();
  }

  // lanes
  bots.forEach((b,i)=>{
    ctx.fillStyle = i%2 ? "#041022" : "#061a36";
    ctx.fillRect(0,b.y-30,canvas.width,60);
  });

  // finish line
  ctx.fillStyle="#fff";
  ctx.fillRect(FINISH_LINE-cameraX+CAMERA_OFFSET,0,8,canvas.height);
}

function drawParticles(bot){
  bot.particles.forEach(p=>{
    ctx.fillStyle = `rgba(0,255,255,${p.life/30})`;
    ctx.beginPath();
    ctx.arc(p.x-cameraX+CAMERA_OFFSET,p.y,p.size,0,Math.PI*2);
    ctx.fill();
  });
}

function drawBot(bot){
  const x = bot.x - cameraX + CAMERA_OFFSET;
  const y = bot.y;
  const pulse = Math.sin(bot.frame*0.25)*6;
  const scale = 1 + Math.min(bot.speed/7,0.3);

  ctx.save();
  ctx.translate(x,y);
  ctx.scale(scale,scale);
  ctx.globalCompositeOperation="lighter";

  // glow
  const glow = ctx.createRadialGradient(0,0,10,0,0,40+pulse);
  glow.addColorStop(0,bot.color);
  glow.addColorStop(1,"transparent");
  ctx.fillStyle = glow;
  ctx.beginPath();
  ctx.arc(0,0,40+pulse,0,Math.PI*2);
  ctx.fill();

  // rings
  for(let i=0;i<3;i++){
    ctx.strokeStyle = bot.color;
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(0,0,18+i*6+pulse*0.4,0,Math.PI*2);
    ctx.stroke();
  }

  // core
  ctx.fillStyle = bot.color;
  ctx.beginPath();
  ctx.arc(0,0,14,0,Math.PI*2);
  ctx.fill();

  // thruster
  ctx.fillStyle="rgba(255,255,255,0.9)";
  ctx.beginPath();
  ctx.moveTo(-14,0);
  ctx.lineTo(-30+pulse,8);
  ctx.lineTo(-30-pulse,-8);
  ctx.fill();

  ctx.restore();
  ctx.globalCompositeOperation="source-over";
}

/* =======================
   GAME LOOP
======================= */
function update(){
  let lead = 0;
  let leader = null;

  bots.forEach(bot=>{
    if(bot.finished) return;

    let pace = bot.speed;
    if(bot.heat < 40) pace *= 0.7;

    if(Math.random() < bot.overclock*0.02){
      pace += 3;
      announce(`‚ö° ${bot.name} OVERCLOCK`);
    }

    bot.x += pace;
    bot.heat -= 0.2;
    bot.frame++;

    spawnParticle(bot);
    updateParticles(bot);

    if(bot.x > lead){
      lead = bot.x;
      leader = bot;
    }

    if(bot.x >= FINISH_LINE){
      bot.finished = true;
      finishRace(bot);
    }
  });

  if(leader){
    cameraX += (leader.x - cameraX - CAMERA_OFFSET)*0.08;
  }
}

function draw(){
  drawTrack();
  bots.forEach(drawParticles);
  bots.forEach(drawBot);
}

function loop(){
  if(!racing) return;
  update();
  draw();
  requestAnimationFrame(loop);
}

/* =======================
   GAME CONTROL
======================= */
function startRace(){
  if(racing) return;

  const bet = +betEl.value;
  if(bet<=0 || bet>balance) return;

  balance -= bet;
  balanceEl.textContent = balance;

  bots.forEach((b,i)=>{
    b.x = 0;
    b.y = canvas.height*0.35 + i*70;
    b.heat = 120;
    b.finished = false;
    b.particles = [];
  });

  racing = true;
  announce("ü§ñ AI SYSTEMS ONLINE");
  loop();
}

function finishRace(winner){
  racing = false;

  const bet = +betEl.value;
  if(+pickEl.value === bots.indexOf(winner)){
    const payout = bet*3;
    balance += payout;
    announce(`üèÜ ${winner.name} WINS +$${payout}`);
  }else{
    announce(`${winner.name} wins the race`);
  }

  balanceEl.textContent = balance;
}
</script>

</body>
</html>
