<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AI Bot Racing Ultimate</title>
<style>
body{margin:0;background:#000;font-family:Arial;overflow:hidden}
#ui{
 position:absolute;bottom:16px;left:50%;transform:translateX(-50%);
 background:rgba(10,20,40,.95);padding:14px;border-radius:18px;
 color:#00ffff;min-width:280px;box-shadow:0 0 30px #00ffff66;
}
select,input,button{width:100%;margin-top:6px;padding:8px;border-radius:10px;border:none}
button{background:linear-gradient(135deg,#00ffff,#0088ff);font-weight:bold}
#log{text-align:center;margin-top:8px;min-height:22px}
#finish{
 position:absolute;top:40%;left:50%;transform:translateX(-50%);
 font-size:64px;font-weight:bold;color:#fff;
 text-shadow:0 0 30px #00ffff;
 opacity:0;pointer-events:none;
}
canvas{display:block}
</style>
</head>

<body>
<canvas id="c"></canvas>
<div id="finish">FINISH!</div>

<div id="ui">
Balance: $<span id="bal">900</span>

<select id="track"></select>
<select id="bot"></select>
<input id="bet" type="number" value="100">
<button onclick="startRace()">START RACE</button>
<button onclick="openShop()">BOT SHOP</button>
<div id="log"></div>
</div>

<script>
const c=document.getElementById("c"),x=c.getContext("2d");
function resize(){c.width=innerWidth;c.height=innerHeight}
addEventListener("resize",resize);resize();

let balance=900;
const balEl=document.getElementById("bal");
const logEl=document.getElementById("log");
const finishEl=document.getElementById("finish");

const tracks=[
 {name:"NEON CIRCUIT",length:3500},
 {name:"LAVA RUN",length:4200},
 {name:"VOID DRIFT",length:3800}
];

const ownedBots=[
 {id:"NEON-X",color:"#00ffff",speed:2.6,cooling:1,overclock:.6,wins:0,races:0}
];

const shopBots=[
 {id:"PHANTOM",price:400,color:"#ff55ff",speed:2.4,cooling:.9,overclock:.7},
 {id:"GOLDCORE",price:650,color:"#ffd700",speed:2.2,cooling:1.3,overclock:.5}
];

let racers=[],track,currentCam=0,racing=false;

function populateUI(){
 document.getElementById("track").innerHTML=
 tracks.map((t,i)=>`<option value=${i}>${t.name}</option>`).join("");
 document.getElementById("bot").innerHTML=
 ownedBots.map((b,i)=>`<option value=${i}>${b.id} (Lv${b.wins+1})</option>`).join("");
}
populateUI();

function startRace(){
 if(racing) return;
 const bet=+bet.value;
 if(bet>balance||bet<=0) return;

 balance-=bet;balEl.textContent=balance;
 finishEl.style.opacity=0;

 track=tracks[track.value];
 racers=ownedBots.map((b,i)=>({
  ...b,x:0,y:c.height*.4+i*70,heat:100,finished:false,parts:[]
 }));
 currentCam=0;racing=true;
 logEl.textContent="ðŸ Race Started!";
 requestAnimationFrame(loop);
}

function loop(){
 if(!racing) return;
 update();draw();
 requestAnimationFrame(loop);
}

function update(){
 let leader=null;
 racers.forEach(r=>{
  if(r.finished) return;
  let v=r.speed+(Math.random()*.6);
  if(Math.random()<r.overclock*.02){v+=3;logEl.textContent=`âš¡ ${r.id} BOOST!`}
  r.x+=v;
  r.heat-=.3/r.cooling;
  if(r.x>track.length){finish(r)}
  if(!leader||r.x>leader.x) leader=r;
 });
 if(leader) currentCam+=(leader.x-currentCam-300)*.1;
}

function finish(w){
 racing=false;
 finishEl.style.opacity=1;
 w.wins++;w.races++;
 logEl.textContent=`ðŸ† ${w.id} WINS!`;
 balance+=200;balEl.textContent=balance;
 populateUI();
}

function draw(){
 x.fillStyle="#030814";x.fillRect(0,0,c.width,c.height);
 racers.forEach(r=>{
  const px=r.x-currentCam+300;
  x.fillStyle=r.color;
  x.beginPath();x.arc(px,r.y,14,0,Math.PI*2);x.fill();
  x.strokeStyle=r.color;
  x.strokeRect(track.length-currentCam+300,0,6,c.height);
 });
}

function openShop(){
 let msg="BOT SHOP\n";
 shopBots.forEach((b,i)=>msg+=`${i+1}. ${b.id} - $${b.price}\n`);
 const choice=prompt(msg+"Enter # to buy");
 const b=shopBots[choice-1];
 if(b&&balance>=b.price){
  balance-=b.price;
  ownedBots.push({...b,wins:0,races:0});
  populateUI();balEl.textContent=balance;
 }
}
</script>
</body>
</html>
