<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horse Racing Simulator</title>
    <style>
        body { font-family: Arial, sans-serif; }
        canvas { border: 2px solid #333; margin-top: 20px; }
        #startButton { padding: 10px 20px; background-color: #4CAF50; color: white; font-size: 16px; cursor: pointer; }
        #raceInfo { margin-top: 20px; font-size: 18px; }
        #horseStats { font-size: 14px; }
        #statsTable { margin-top: 10px; border-collapse: collapse; width: 100%; }
        #statsTable td, #statsTable th { padding: 8px; border: 1px solid #ddd; }
        #statsTable th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>Horse Racing Simulator</h1>
    <button id="startButton">Start Race</button>
    <div id="raceInfo"></div>
    <div id="horseStats"></div>
    <canvas id="raceCanvas" width="900" height="400"></canvas>

    <script>
        const canvas = document.getElementById("raceCanvas");
        const ctx = canvas.getContext("2d");

        // Load images for horses and jockeys (replace these with actual images later)
        const horseImages = [
            "https://via.placeholder.com/50x50/FF0000/FFFFFF?text=H1",  // Horse 1 image
            "https://via.placeholder.com/50x50/0000FF/FFFFFF?text=H2",  // Horse 2 image
            "https://via.placeholder.com/50x50/00FF00/FFFFFF?text=H3",  // Horse 3 image
            "https://via.placeholder.com/50x50/FFFF00/FFFFFF?text=H4"   // Horse 4 image
        ];

        const jockeyImages = [
            "https://via.placeholder.com/30x50/000000/FFFFFF?text=J1", // Jockey 1
            "https://via.placeholder.com/30x50/000000/FFFFFF?text=J2", // Jockey 2
            "https://via.placeholder.com/30x50/000000/FFFFFF?text=J3", // Jockey 3
            "https://via.placeholder.com/30x50/000000/FFFFFF?text=J4"  // Jockey 4
        ];

        const backgroundImage = new Image();
        backgroundImage.src = 'https://via.placeholder.com/900x400/32CD32/FFFFFF?text=Race+Track+Background'; // Placeholder background image

        const trackWidth = 800;
        const trackHeight = 300;
        const laneHeight = 70;

        // Define horse stats
        const horses = [
            { name: "Thunder", color: "red", position: 0, speed: 15, stamina: 1.0, agility: 10, image: new Image(), jockeyImage: new Image() },
            { name: "Blaze", color: "blue", position: 0, speed: 14, stamina: 1.1, agility: 12, image: new Image(), jockeyImage: new Image() },
            { name: "Storm", color: "green", position: 0, speed: 16, stamina: 0.9, agility: 8, image: new Image(), jockeyImage: new Image() },
            { name: "Lightning", color: "yellow", position: 0, speed: 13, stamina: 1.2, agility: 11, image: new Image(), jockeyImage: new Image() }
        ];

        horses.forEach((horse, index) => {
            horse.image.src = horseImages[index];         // Set horse image
            horse.jockeyImage.src = jockeyImages[index];  // Set jockey image
        });

        let raceInProgress = false;

        // Draw the race track and lanes
        function drawRaceTrack() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw the background
            ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);

            // Draw lanes
            ctx.fillStyle = "#A9A9A9";  // Gray color for lanes
            for (let i = 0; i < horses.length; i++) {
                ctx.fillRect(50, 50 + i * laneHeight, trackWidth, laneHeight - 10);
            }

            // Draw track border
            ctx.strokeStyle = "black";
            ctx.lineWidth = 3;
            ctx.strokeRect(50, 50, trackWidth, trackHeight);

            // Draw finish line
            ctx.strokeStyle = "red";
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(trackWidth + 50, 50);
            ctx.lineTo(trackWidth + 50, 50 + trackHeight);
            ctx.stroke();
            ctx.fillStyle = "red";
            ctx.fillText("Finish Line", trackWidth + 60, 100);
        }

        // Draw the horses and jockeys
        function drawHorses() {
            horses.forEach((horse, index) => {
                ctx.drawImage(horse.image, 50 + horse.position, 50 + index * laneHeight, 50, 50); // Horse image
                ctx.drawImage(horse.jockeyImage, 50 + horse.position + 10, 50 + index * laneHeight - 30, 30, 50); // Jockey image
                ctx.fillStyle = "black";
                ctx.fillText(horse.name, 50 + horse.position, 50 + index * laneHeight + 30);
            });
        }

        // Display horse stats
        function displayHorseStats() {
            let statsHtml = `<table id="statsTable"><tr><th>Horse</th><th>Speed</th><th>Stamina</th><th>Agility</th></tr>`;
            horses.forEach(horse => {
                statsHtml += `<tr>
                    <td>${horse.name}</td>
                    <td>${horse.speed}</td>
                    <td>${horse.stamina}</td>
                    <td>${horse.agility}</td>
                </tr>`;
            });
            statsHtml += `</table>`;
            document.getElementById("horseStats").innerHTML = statsHtml;
        }

        // Simulate the race
        function startRace() {
            raceInProgress = true;
            let raceInterval = setInterval(() => {
                drawRaceTrack();
                drawHorses();

                // Move each horse based on random speed and stamina
                horses.forEach(horse => {
                    if (horse.position < trackWidth - 50) {
                        let speedModifier = horse.speed * horse.stamina * 0.01; // Speed + Stamina
                        horse.position += Math.random() * speedModifier + 2; // Random speed factor based on stats
                    }
                });

                // Check if the race is finished
                if (horses.some(horse => horse.position >= trackWidth - 50)) {
                    raceInProgress = false;
                    clearInterval(raceInterval);
                    let winner = horses.reduce((a, b) => a.position > b.position ? a : b);
                    document.getElementById("raceInfo").innerText = `Winner: ${winner.name}`;
                    setTimeout(() => alert(`${winner.name} wins the race!`), 500);
                }
            }, 50);
        }

        // Handle the button click
        document.getElementById("startButton").addEventListener("click", function() {
            if (!raceInProgress) {
                horses.forEach(horse => horse.position = 0);  // Reset positions
                document.getElementById("raceInfo").innerText = "Race in progress...";
                startRace();
            }
        });

        // Initial drawing
        backgroundImage.onload = function() {
            drawRaceTrack();
            drawHorses();
            displayHorseStats();
        };
    </script>
</body>
</html>
