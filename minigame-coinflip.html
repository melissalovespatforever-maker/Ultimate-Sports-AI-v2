<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MLB Story</title>
<style>
  body { font-family: sans-serif; background: #f0f0f0; display:flex; flex-direction:column; align-items:center; padding:20px;}
  h1 { margin-bottom:10px; }
  #story { width: 600px; background:#fff; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.2);}
  #choices { margin-top:20px; display:flex; flex-direction:column; gap:10px; }
  button { padding:10px 20px; font-size:16px; cursor:pointer; border:none; border-radius:5px; background:#007bff; color:#fff; }
  button:hover { background:#0056b3; }
  #stats { width: 600px; margin-top:20px; background:#fff; padding:15px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.2);}
  #message { margin-top:10px; font-style:italic; color:#333;}
</style>
</head>
<body>

<h1>MLB Story</h1>
<div id="story">Loading story...</div>
<div id="choices"></div>
<div id="stats"></div>
<div id="message"></div>

<script>
// --- Player Stats ---
let player = {
  batting: 50,
  pitching: 50,
  fielding: 50,
  stamina: 100,
  morale: 50,
  reputation: 50,
  level: 1, // Minor League
  storyStage: 0
};

// --- Story Segments ---
const story = [
  {
    text: "Welcome to the Minor League! Today is your first training session. Do you train hard or play it safe?",
    choices: [
      { text: "Train hard", effects:{batting:5, pitching:5, stamina:-15, morale:5}, next:1 },
      { text: "Play it safe", effects:{stamina:10, morale:0}, next:1 }
    ]
  },
  {
    text: "Your first game is coming up. Do you swing aggressively or play conservative?",
    choices: [
      { text: "Swing aggressively", effects:{batting: Math.random()*10, morale:5, stamina:-10}, next:2 },
      { text: "Play conservative", effects:{batting: Math.random()*5, morale:0, stamina:-5}, next:2 }
    ]
  },
  {
    text: "A teammate challenges you on the field. How do you respond?",
    choices: [
      { text: "Stay calm", effects:{morale:5, reputation:5}, next:3 },
      { text: "Argue back", effects:{morale:-5, reputation:-5}, next:3 }
    ]
  },
  {
    text: "A scout notices your performance. Do you impress them with an extra workout or take a rest day?",
    choices: [
      { text: "Extra workout", effects:{batting:5, stamina:-10, reputation:10}, next:4 },
      { text: "Rest", effects:{stamina:15}, next:4 }
    ]
  },
  {
    text: "End of Minor League season! Your stats will determine if you are promoted to AAA.",
    choices: [
      { text: "See result", effects:{}, next:null }
    ]
  }
];

// --- Render Story Segment ---
function renderStory(stage){
  const seg = story[stage];
  document.getElementById("story").innerText = seg.text;
  const choicesDiv = document.getElementById("choices");
  choicesDiv.innerHTML="";
  seg.choices.forEach((choice,i)=>{
    const btn = document.createElement("button");
    btn.innerText = choice.text;
    btn.onclick = ()=>{ applyChoice(choice); };
    choicesDiv.appendChild(btn);
  });
  renderStats();
}

// --- Apply Choice ---
function applyChoice(choice){
  for(const key in choice.effects){
    if(player.hasOwnProperty(key)){
      player[key] += choice.effects[key];
      if(player[key] > 100) player[key]=100;
      if(player[key]<0) player[key]=0;
    }
  }
  player.storyStage = choice.next;
  if(choice.next === null){
    // End of story
    endSeason();
  } else {
    renderStory(choice.next);
  }
}

// --- Render Stats ---
function renderStats(){
  document.getElementById("stats").innerHTML=
    `Level: ${player.level}<br>
     Batting: ${player.batting.toFixed(0)}<br>
     Pitching: ${player.pitching.toFixed(0)}<br>
     Fielding: ${player.fielding.toFixed(0)}<br>
     Stamina: ${player.stamina.toFixed(0)}<br>
     Morale: ${player.morale.toFixed(0)}<br>
     Reputation: ${player.reputation.toFixed(0)}`;
}

// --- End of Season ---
function endSeason(){
  let msg = "";
  if(player.batting + player.pitching + player.fielding > 180){
    player.level = 2; // Promote to AAA
    msg = "Congrats! You are promoted to AAA!";
  } else {
    msg = "You stay in the Minor League. Train harder next season!";
  }
  document.getElementById("story").innerText = msg;
  document.getElementById("choices").innerHTML="";
  renderStats();
  document.getElementById("message").innerText="Game Over for this prototype. Future seasons coming soon!";
}

// --- Start Game ---
renderStory(0);
</script>

</body>
</html>
